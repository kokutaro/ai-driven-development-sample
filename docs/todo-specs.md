# TODO システム仕様書

## 概要

TODOシステムの仕様書です。Microsoft To Doのような3カラムレイアウトを採用し、ユーザーフレンドリーなタスク管理システムを構築します。

## 画面構成

### 全体レイアウト

- **3カラム構成**
  - 左カラム：フィルタ機能
  - 中央カラム：タスク一覧
  - 右カラム：選択したタスクの詳細編集

### ヘッダー

- アプリケーション名「To Do」
- 検索バー
- 設定ボタン、ヘルプボタン、ユーザーアイコン

## 機能仕様

### 1. フィルタ機能（左カラム）

#### 1.1 フィルタ項目

- **今日の予定** - 今日が期限のタスク
- **重要** - 重要フラグが設定されたタスク
- **今後の予定** - 期限が今日以降のタスク
- **自分に割り当て** - ユーザーに割り当てられたタスク
- **フラグを設定したメール** - メール連携機能（将来拡張）
- **タスク** - 全てのタスク
- **完了済み** - 完了したタスク

#### 1.2 フィルタ機能

- 各フィルタ項目をクリックすると、該当するタスクのみを中央カラムに表示
- 選択されたフィルタはハイライト表示
- フィルタ項目の右側にタスク数を表示

### 2. タスク一覧（中央カラム）

#### 2.1 ヘッダー

- **動的タイトル**
  - 選択したフィルタに応じて変化
  - 「今日の予定」「重要なタスク」「今後の予定」など
- **並び替えオプション**
  - 作成日時
  - 期限日
  - 重要度
  - アルファベット順

#### 2.2 タスク追加

- **「タスクの追加」ボタン**
  - 一覧の上部に配置
  - クリックでタスク作成モーダルを表示

#### 2.3 タスク表示

- **タスクカード**
  - チェックボックス（完了/未完了）
  - タスクタイトル
  - 期限日（設定されている場合）
  - 重要フラグ（星マーク）
  - 削除ボタン

### 3. タスク詳細（右カラム）

#### 3.1 表示条件

- 中央カラムのタスクを選択すると表示
- 選択されたタスクはハイライト表示

#### 3.2 編集可能項目

- **タスクタイトル**
  - テキスト入力フィールド
  - 必須項目
- **メモ・説明**
  - 複数行テキスト入力
  - 任意項目
- **期限日**
  - 日付選択
  - 任意項目
- **重要度**
  - 重要フラグのON/OFF
- **カテゴリ**
  - 色分け用カテゴリ選択
- **サブタスク**
  - 「ステップの追加」機能
  - チェックリスト形式
- **通知設定**
  - リマインダー機能
- **繰り返し設定**
  - 定期タスク設定

## タスク操作

### 4.1 タスク作成

- **作成方法**
  - 「タスクの追加」ボタンクリック
  - モーダルダイアログで作成
- **必須項目**
  - タスクタイトル
- **任意項目**
  - 説明
  - 期限日
  - 重要度
  - カテゴリ

### 4.2 タスク編集

- **編集方法**
  - タスクをクリックして右カラムで編集
  - リアルタイム保存
- **編集可能項目**
  - 作成時の項目すべて

### 4.3 タスク完了

- **完了方法**
  - チェックボックスをクリック
  - 完了したタスクは「完了済み」フィルタに移動
- **完了解除**
  - 完了済みタスクのチェックボックスを再度クリック

### 4.4 タスク削除

- **削除方法**
  - タスクカードの削除ボタンクリック
  - 確認ダイアログで削除確認
- **削除確認**
  - 「このタスクを削除しますか？」
  - 削除ボタンとキャンセルボタン

## 技術要件

### 5.1 技術スタック

- **フロントエンド**: Next.js 15 (App Router)
- **UI フレームワーク**: Mantine
- **バリデーション**: Zod
- **ORM**: Prisma
- **データベース**: PostgreSQL
- **パッケージマネージャ**: Yarn

### 5.2 レスポンシブ対応

- **デスクトップ**: 3カラムレイアウト
- **タブレット**: 2カラムレイアウト（左カラム + 中央カラム）
- **スマートフォン**: 1カラムレイアウト（画面切り替え）

## データ要件

### 6.1 タスクデータ構造

```typescript
interface Todo {
  id: string
  title: string
  description?: string
  dueDate?: Date
  isImportant: boolean
  isCompleted: boolean
  category?: string
  createdAt: Date
  updatedAt: Date
  userId: string
}
```

### 6.2 カテゴリデータ構造

```typescript
interface Category {
  id: string
  name: string
  color: string
  userId: string
}
```

### 6.3 サブタスクデータ構造

```typescript
interface SubTask {
  id: string
  title: string
  isCompleted: boolean
  todoId: string
  order: number
}
```

## UI/UX要件

### 7.1 デザイン原則

- **シンプルで直感的**
- **Microsoft To Do風のモダンUI**
- **アクセシビリティ対応**
- **レスポンシブデザイン**

### 7.2 カラーパレット

- **プライマリカラー**: ブルー系
- **セカンダリカラー**: グレー系
- **アクセントカラー**: 各カテゴリの色

### 7.3 アニメーション

- **フェードイン/アウト**
- **スライドアニメーション**
- **ホバーエフェクト**

## パフォーマンス要件

### 8.1 応答時間

- **ページ読み込み**: 3秒以内
- **タスク操作**: 1秒以内
- **検索結果**: 2秒以内

### 8.2 データ量

- **1ユーザーあたり**: 最大10,000タスク
- **同時接続数**: 100ユーザー

## セキュリティ要件

### 9.1 認証・認可

- **ユーザー認証**: 必須
- **データアクセス**: ユーザー固有データのみ
- **API認証**: Bearer Token

### 9.2 データ保護

- **入力値検証**: Zodスキーマ
- **SQLインジェクション対策**: Prisma ORM
- **XSS対策**: Next.js標準機能

## 今後の拡張予定

### 10.1 フェーズ2

- **チーム機能**: タスク共有
- **メール連携**: Outlook/Gmail連携
- **カレンダー連携**: Google Calendar連携

### 10.2 フェーズ3

- **モバイルアプリ**: React Native
- **オフライン対応**: PWA
- **AI機能**: タスク提案

## 参考資料

- [画面イメージ](./img/page-image.png)
- [Next.js 15 ドキュメント](https://nextjs.org/docs)
- [Mantine ドキュメント](https://mantine.dev/)
- [Prisma ドキュメント](https://www.prisma.io/docs)
